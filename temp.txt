            if (meleeTransform != null) {
                float distance = playerTransform.getPosition().distance(meleeTransform.getPosition());
                if (distance < 20) { // æ•Œäººè¿‘ç¨‹æ”»å‡»èŒƒå›´
                    playerHealth.takeDamage(15); // æ•Œäººè¿‘ç¨‹æ”»å‡»ä¼¤å®³
                    playSound("damage"); // æ’­æ”¾ä¼¤å®³éŸ³æ•ˆ
                    enemyMelee.destroy(); // é”€æ¯æ”»å‡»åˆ¤å®šåŒºåŸ?                }
            }
        }

        // 2. æ•Œäººå­å¼¹ vs çŽ©å®¶
        for (GameObject projectile : enemyProjectiles) {
            TransformComponent projTransform = projectile.getComponent(TransformComponent.class);
            if (projTransform != null) {
                float distance = playerTransform.getPosition().distance(projTransform.getPosition());
                if (distance < 15) { // å­å¼¹ç¢°æ’žåŠå¾„
                    playerHealth.takeDamage(5); // æ•Œäººè¿œç¨‹ä¼¤å®³
                    playSound("damage"); // æ’­æ”¾ä¼¤å®³éŸ³æ•ˆ
                    projectile.destroy(); // é”€æ¯å­å¼?                }
            }
        }

        // 3. çŽ©å®¶å­å¼¹ vs æ•Œäºº
        for (GameObject projectile : playerProjectiles) {
            TransformComponent projTransform = projectile.getComponent(TransformComponent.class);
            if (projTransform == null) continue;
            for (GameObject enemy : enemies) {
                if (!enemy.isActive()) continue;
                HealthComponent enemyHealth = enemy.getComponent(HealthComponent.class);
                if (enemyHealth == null || !enemyHealth.isAlive()) continue;
                TransformComponent enemyTransform = enemy.getComponent(TransformComponent.class);
                if (enemyHealth != null && enemyTransform != null) {
                    float distance = projTransform.getPosition().distance(enemyTransform.getPosition());
                    if (distance < 20) {
                        enemyHealth.takeDamage(20); // å­å¼¹ä¼¤å®³
                        projectile.destroy(); // é”€æ¯å­å¼?                        break;
                    }
                }
            }
        }
        
        // 4. çŽ©å®¶ç‚®å¼¹ vs æ•Œäººï¼ˆå¤šç›®æ ‡æ”»å‡»ï¼?        //System.out.println("æ£€æŸ¥ç‚®å¼¹ç¢°æ’žï¼Œç‚®å¼¹æ•°é‡: " + playerCannonballs.size());
        for (GameObject cannonball : playerCannonballs) {
            TransformComponent projTransform = cannonball.getComponent(TransformComponent.class);
            if (projTransform == null) continue;
            
            //System.out.println("ç‚®å¼¹ä½ç½®: " + projTransform.getPosition().x + ", " + projTransform.getPosition().y);
            boolean hitAnyEnemy = false;
            for (GameObject enemy : enemies) {
                if (!enemy.isActive()) continue;
                HealthComponent enemyHealth = enemy.getComponent(HealthComponent.class);
                if (enemyHealth == null || !enemyHealth.isAlive()) continue;
                TransformComponent enemyTransform = enemy.getComponent(TransformComponent.class);
                if (enemyHealth != null && enemyTransform != null) {
                    float distance = projTransform.getPosition().distance(enemyTransform.getPosition());
                    //System.out.println("æ•Œäººä½ç½®: " + enemyTransform.getPosition().x + ", " + enemyTransform.getPosition().y + ", è·ç¦»: " + distance);
                    if (distance < Cannonball.getCannonballScanRange()) { // ä½¿ç”¨æ‰«æè·ç¦»è¿›è¡Œç¢°æ’žæ£€æµ?                        //System.out.println("ç‚®å¼¹æ‰«æå‡»ä¸­æ•Œäººï¼Œè·ç¦? " + distance + " (æ‰«æèŒƒå›´: " + Cannonball.getCannonballScanRange() + ")");
                        hitAnyEnemy = true;
                        // ä¸breakï¼Œç»§ç»­æ£€æŸ¥å…¶ä»–æ•Œäº?                    }
                }
            }
            
            // å¦‚æžœå‡»ä¸­äº†ä»»ä½•æ•Œäººï¼Œé”€æ¯ç‚®å¼¹å¹¶åˆ›å»ºçˆ†ç‚¸æ•ˆæžœ
            if (hitAnyEnemy) {
                // åœ¨æ”»å‡»èŒƒå›´å†…å¯¹æ‰€æœ‰æ•Œäººé€ æˆä¼¤å®³
                for (GameObject enemy : enemies) {
                    if (!enemy.isActive()) continue;
                    HealthComponent enemyHealth = enemy.getComponent(HealthComponent.class);
                    if (enemyHealth == null || !enemyHealth.isAlive()) continue;
                    TransformComponent enemyTransform = enemy.getComponent(TransformComponent.class);
                    if (enemyHealth != null && enemyTransform != null) {
                        float distance = projTransform.getPosition().distance(enemyTransform.getPosition());
                        if (distance < Cannonball.getCannonballAttackRange()) { // ä½¿ç”¨æ”»å‡»è·ç¦»
                            enemyHealth.takeDamage(Cannonball.getCannonballDamage());
                        }
                    }
                }
                
                cannonball.destroy();
                playSound("bomb_explode"); // æ’­æ”¾ç‚®å¼¹çˆ†ç‚¸éŸ³æ•ˆ
                // åˆ›å»ºçˆ†ç‚¸æ•ˆæžœ - ç›´æŽ¥åœ¨åœºæ™¯ä¸­æ·»åŠ å¯¹è±¡
                GameObject explosionRange = new GameObject("CannonballExplosion", "CannonballExplosion");
                explosionRange.addComponent(new TransformComponent(new Vector2(projTransform.getPosition().x, projTransform.getPosition().y)));
                explosionRange.addComponent(new AttackRangeComponent(
                    Cannonball.getCannonballExplosionDuration(), 
                    Cannonball.getCannonballExplosionRadius()
                )); // ä½¿ç”¨ç‚®å¼¹ç±»çš„çˆ†ç‚¸æ•ˆæžœå¸¸é‡
                scene.addGameObject(explosionRange);
                //System.out.println("ç‚®å¼¹çˆ†ç‚¸æ•ˆæžœå·²åˆ›å»?);
            }
        }
        
        // 4. Bossç‚¸å¼¹ vs çŽ©å®¶
        List<GameObject> bossBombs = scene.findGameObjectsByTag("BossBomb");
        GameObject playerForBomb = scene.findGameObjectByTag("Player");
        if (playerForBomb != null) {
            TransformComponent playerTransformForBomb = playerForBomb.getComponent(TransformComponent.class);
            HealthComponent playerHealthForBomb = playerForBomb.getComponent(HealthComponent.class);
            
            for (GameObject bomb : bossBombs) {
                TransformComponent bombTransform = bomb.getComponent(TransformComponent.class);
                if (bombTransform != null && playerTransformForBomb != null && playerHealthForBomb != null) {
                    float distance = bombTransform.getPosition().distance(playerTransformForBomb.getPosition());
                    if (distance < Bomb.getBombScanRange()) { // ä½¿ç”¨æ‰«æè·ç¦»è¿›è¡Œç¢°æ’žæ£€æµ?                        // åœ¨æ”»å‡»èŒƒå›´å†…å¯¹çŽ©å®¶é€ æˆä¼¤å®³
                        if (distance < Bomb.getBombAttackRange()) {
                            playerHealthForBomb.takeDamage(Bomb.getBombDamage());
                            playSound("damage"); // æ’­æ”¾ä¼¤å®³éŸ³æ•ˆ
                        }
                        
                        bomb.destroy();
                        playSound("bomb_explode"); // æ’­æ”¾ç‚¸å¼¹çˆ†ç‚¸éŸ³æ•ˆ
                        
                        // åˆ›å»ºç‚¸å¼¹çˆ†ç‚¸æ•ˆæžœ
                        GameObject explosionRange = new GameObject("BombExplosion", "BombExplosion");
                        explosionRange.addComponent(new TransformComponent(new Vector2(bombTransform.getPosition().x, bombTransform.getPosition().y)));
                        explosionRange.addComponent(new AttackRangeComponent(
                            Bomb.getBombExplosionDuration(), 
                            Bomb.getBombExplosionRadius()
                        ));
                        scene.addGameObject(explosionRange);
                        System.out.println("Bossç‚¸å¼¹å‡»ä¸­çŽ©å®¶ï¼?);
                    }
                }
            }
        }
        
        // 5. çŽ©å®¶è¿‘æˆ˜ vs æ•Œäºº
        for (GameObject melee : meleeAttacks) {
            TransformComponent meleeTransform = melee.getComponent(TransformComponent.class);
            if (meleeTransform == null) continue;
            for (GameObject enemy : enemies) {
                HealthComponent enemyHealth = enemy.getComponent(HealthComponent.class);
                TransformComponent enemyTransform = enemy.getComponent(TransformComponent.class);
                if (enemyHealth != null && enemyTransform != null) {
                    float distance = meleeTransform.getPosition().distance(enemyTransform.getPosition());
                    if (distance < Player.getMeleeRange()) { // ä½¿ç”¨çŽ©å®¶ç±»çš„è¿‘æˆ˜èŒƒå›´å¸¸é‡
                        enemyHealth.takeDamage(Player.getMeleeDamage()); // ä½¿ç”¨çŽ©å®¶ç±»çš„è¿‘æˆ˜ä¼¤å®³å¸¸é‡
                    }
                }
            }
            //melee.destroy(); // è¿‘æˆ˜æ”»å‡»æ˜¯ä¸€æ¬¡æ€§çš„
        }
    }
    
}
